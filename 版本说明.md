# V2.2

版本修改点：

* 把左右mic、ref信号的判断基准值，调整为dB值，之前为0到32767的整数值。
* 把测试左右mic的1000hz、100hz、300hz的判断基准值分开，之前是用同一个值。
* 调整AEC测试的判断标准，从生产的实际情况来看，部分机器难以完全消除自身的声音，但是实际使用情况来看，对通话没有明显影响。而且之前AEC标准比较严苛，可能导致多次测试结果不稳定。
* 1000hz的播放音源文件，幅值从之前的50%调整到100%（之前是因为容易截顶，后面调整音箱端软件后，不会再截顶，所以音频文件统一幅值为100%），所以现在测试左右mic得到的dB值，会比之前的偏大。
* 把100hz和300hz的音频测试结果的dB值，也在界面上进行显示。

参数说明：

```
{
  "PCBA": false,//为true，表示是pcba版本，为false，则为整机版本。
  "SINE_ABS_BASE": -29.8,//1000hz录音时认为mic合适，则dB值需要高于这个值，-29.8dB，是幅值为1500时，对应的dB值。
  "SINE_ABS_BASE_100HZ": -29.8,//100hz录音时认为mic合适，则dB值需要高于这个值，
  "SINE_ABS_BASE_300HZ": -29.8,//300hz录音时认为mic合适，则dB值需要高于这个值，
  "REF_SINE_ABS_BASE": -20.0,//ref测试合格，则dB值需要高于这个值。
  "LINE_ABS_BASE": 3000,//AEC测试，判断的基准值，为0到32767之间的值。这个不能用dB来表述。
  "LINE_POINTS": 1000,//AEC测试，允许超过基准值的点的个数。
  "WAV_100HZ": true,//测试左右mic时，是否播放100hz的声音进行测试，
  "WAV_300HZ": true//测试左右mic时，是否播放300hz的声音进行测试，
}
```

![image-20210308103532689](https://gitee.com/teddyxiong53/playopenwrt_pic/raw/master/image-20210308103532689.png)

